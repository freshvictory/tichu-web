<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tichu Scorer</title>

    <link rel="stylesheet" href="./index.css" />
  </head>
  <body>
    <header class="visually-hidden"><h1 class="heading">Tichu</h1></header>
    <main class="page">
      <form id="score-form">
        <div class="teams">
          <output
            id="top-score"
            name="topScore"
            class="score"
            for="taken-points
              top-bet
              bottom-bet
              consecutive-none
              consecutive-us
              consecutive-them
            "
            form="score-form"
            >0</output
          >

          <fieldset class="bets ours">
            <input
              type="radio"
              name="ourBets"
              value="none"
              checked
              id="bets-us-none"
              class="visually-hidden"
            />
            <label for="bets-us-none" class="bet">No bet</label>
            <input
              type="radio"
              name="ourBets"
              value="tichu"
              id="bets-us-tichu"
              class="visually-hidden"
            />
            <label for="bets-us-tichu" class="bet">Tichu</label>
            <input
              type="radio"
              name="ourBets"
              value="grand"
              id="bets-us-grand"
              class="visually-hidden"
            />
            <label for="bets-us-grand" class="bet">Grand Tichu</label>

            <div class="bet-results">
              <input
                type="radio"
                name="firstBetSuccess"
                value="us-false"
                id="bet-failure-us"
                class="visually-hidden"
              />
              <input
                type="radio"
                name="firstBetSuccess"
                value="us-true"
                id="bet-success-us"
                class="visually-hidden"
              />
              <label
                for="bet-failure-us"
                class="bet-result"
                data-result="failure"
                >✗</label
              >
              <label
                for="bet-success-us"
                class="bet-result"
                data-result="success"
                >✓</label
              >
            </div>
          </fieldset>

          <hr />

          <fieldset class="bets theirs">
            <input
              type="radio"
              name="theirBets"
              value="none"
              checked
              id="bets-them-none"
              class="visually-hidden"
            />
            <label for="bets-them-none" class="bet">No bet</label>
            <input
              type="radio"
              name="theirBets"
              value="tichu"
              id="bets-them-tichu"
              class="visually-hidden"
            />
            <label for="bets-them-tichu" class="bet">Tichu</label>
            <input
              type="radio"
              name="theirBets"
              value="grand"
              id="bets-them-grand"
              class="visually-hidden"
            />
            <label for="bets-them-grand" class="bet">Grand Tichu</label>

            <div class="bet-results">
              <input
                type="radio"
                name="firstBetSuccess"
                value="them-false"
                id="bet-failure-them"
                class="visually-hidden"
              />
              <input
                type="radio"
                name="firstBetSuccess"
                value="them-true"
                id="bet-success-them"
                class="visually-hidden"
              />
              <label
                for="bet-failure-them"
                class="bet-result"
                data-result="failure"
                >✗</label
              >
              <label
                for="bet-success-them"
                class="bet-result"
                data-result="success"
                >✓</label
              >
            </div>
          </fieldset>

          <output
            id="bottom-score"
            name="bottomScore"
            class="score"
            for="taken-points
            top-bet
            bottom-bet
            consecutive-none
            consecutive-top
            consecutive-bottom
          "
            form="score-form"
            >0</output
          >
        </div>

        <fieldset class="points">
          <legend class="visually-hidden">Points</legend>

          <input
            id="consecutive-us"
            type="radio"
            name="consecutive"
            value="us"
            class="visually-hidden"
          />
          <label for="consecutive-us" class="consecutive">1st & 2nd</label>

          <input
            id="consecutive-none"
            type="radio"
            name="consecutive"
            value="none"
            class="visually-hidden"
            checked
          />
          <label for="consecutive-none" class="consecutive-none">
            <span class="visually-hidden">No consecutive victory</span>
          </label>

          <label for="taken-points" class="visually-hidden">Taken points</label>
          <div class="range-container">
            <input
              id="taken-points"
              name="takenPoints"
              type="range"
              min="-25"
              max="125"
              step="5"
              value="50"
            />
          </div>

          <input
            id="consecutive-them"
            type="radio"
            name="consecutive"
            value="them"
            class="visually-hidden"
          />
          <label for="consecutive-them" class="consecutive">1st & 2nd</label>

          <div id="taken-output" for="taken-points">
            <output id="taken-us">50</output>
            <output id="taken-them">50</output>
          </div>
        </fieldset>

        <div class="actions">
          <button
            type="submit"
            data-theme="secondary"
            value="undo"
            class="secondary"
          >
            Undo
          </button>

          <button type="submit" data-theme="primary" class="submit">
            Score
          </button>
          <button
            type="submit"
            data-theme="secondary"
            value="new"
            class="secondary"
          >
            New
          </button>
        </div>

        <div id="turn-record"></div>
      </form>
    </main>

    <!-- <div class="page">
      <section class="history-container" aria-labelledby="history">
        <h2 id="history">History</h2>
      </section>
    </div> -->

    <script type="module">
      import { attach } from "./index.js";

      const elements = {
        form: document.getElementById("score-form"),

        slider: document.getElementById("taken-points"),
        sliderOutputUs: document.getElementById("taken-us"),
        sliderOutputThem: document.getElementById("taken-them"),

        consecutiveUs: document.getElementById("consecutive-us"),
        consecutiveThem: document.getElementById("consecutive-them"),

        topTeamOutput: document.getElementById("top-score"),
        bottomTeamOutput: document.getElementById("bottom-score"),

        turnRecord: document.getElementById("turn-record"),
      };

      attach(elements, localStorage);
    </script>
  </body>
</html>
